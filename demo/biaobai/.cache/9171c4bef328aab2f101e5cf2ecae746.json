{"dependencies":[{"name":"./two.min.js","dynamic":true}],"generated":{"html":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <script src=\"/two.min.d2b83c0e.js\"></script>\n  <title>嗯。。</title>\n\n  <style>\n@keyframes swing {\n    20% {\n        transform: rotate(15deg)\n    }\n\n    40% {\n        transform: rotate(-10deg)\n    }\n\n    60% {\n        transform: rotate(5deg)\n    }\n\n    80% {\n        transform: rotate(-5deg)\n    }\n\n    to {\n        transform: rotate(0deg)\n    }\n}\n    .shake{\n      animation: 1.5s swing infinite\n    }\n    @font-face {\n      font-family: 'pinghei';\n      src: url('./font/zhu.ttf');\n      src:\n        url('./font/zhu.eot?#font-spider') format('embedded-opentype'),\n        url('./font/zhu.woff') format('woff'),\n        url('./font/zhu.ttf') format('truetype'),\n        url('./font/zhu.svg') format('svg');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    /*使用选择器指定字体*/\n    #modal {\n        font-family: 'pinghei';\n    }\n\n    body {\n      background-color: #fff6ea\n    }\n    #modal{\n      display: none;\n      top: 50%;\n      transform: translateY(-50%);\n      position: absolute;\n      font-size: 50px;\n      z-index: 100;\n      color: #333;\n      width: 100%;\n      text-align: center\n    }\n    #modal span{\n      width: 50%;\n      float: left;\n    }\n  </style>\n  <style>\n  .man {\n  width: 200px;\n  margin-top: 40px;\n  height: 360px;\n}\n\n.head {\n  width: 70px;\n  height: 70px;\n  background-color: #333;\n  border-radius: 50%;\n  animation-name: body;\n  animation-duration: 4s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n}\n\n.body {\n  height: 144px;\n  width: 62px;\n  background-color: #333;\n  border-radius: 100% 20% 0 0;\n  transform: skewX(-2deg);\n  position: relative;\n  left: -50px;  \n  animation-name: body;\n  animation-duration: 4s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n}\n\n.foot {\n  width: 40px;\n  height: 14px;\n  border-radius: 10px 80% 4px 4px;\n  transform: skewX(5deg);\n  background-color: #333;\n  display: inline-block;\n  animation-name: foot;\n  animation-duration: 1.8s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n}\n.foot:last-child {\n    margin-left: -40px;\n    animation-delay: .9s;\n  }\n\n.feet {\n  text-align: left;\n  position: relative;\n  top: 100px;\n  left: -66px;\n  \n}\n.feet:before {\n    width: 120px;\n    height: 8px;\n    border-radius: 50%;\n    content: \"\";\n    background: rgba(#000,.1);\n    position: absolute;\n    bottom: -2px;\n    left: -16px; \n    animation-name: shadow;\n    animation-duration: 3s;\n    animation-iteration-count: infinite;\n    animation-timing-function: ease-in-out;\n  }\n\n\n@keyframes foot {\n  20% {\n    transform: translate3d(34px, -16px, 0) rotate(4deg);\n  } \n  26% {\n      transform: translate3d(34px, -10px, 4) rotate(0deg);\n  }\n  40% {\n      transform: translate3d(56px, -6px, 0) rotate(-6deg);\n  }\n  44% {\n      transform: translate3d(56px, 0, 0) rotate(0deg);\n  }\n   \n}\n\n@keyframes body {\n  25% {\n    transform: translateY(5px);\n  }\n  50% {\n    transform: translateY(0);\n  }\n  75% {\n    transform: translateY(5px);\n  }\n}\n\n\n@keyframes shadow {\n  25% {\n    transform: scale(1.1);\n  }\n \n  75% {\n    transform: scale(.96);\n  }\n}\n  </style>\n  <style> \n    #sad-man{\n      position: absolute;\n      transform: scale(0.4);\n      transition: transform 15s linear;\n      bottom: 10px;\n      opacity: 0;\n    }\n    #sad-man:before{\n      content: '...乐快节夕七';\n      font-size: 30px;\n      position: absolute;\n      left: -250px;\n      top: 98px;\n    }\n    #sad-man.show{\n      opacity: 1;\n      transform: translateX(400px) scale(0.4);\n    }\n\n  </style>\n</head>\n<body>\n    <svg width=\"80\" height=\"80\" viewbox=\"0 0 800 700\" xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n      <path d=\"m263.42 235.15c-66.24 0-120 53.76-120 120 0 134.76 135.93 170.09 228.56 303.31 87.574-132.4 228.56-172.86 228.56-303.31 0-66.24-53.76-120-120-120-48.048 0-89.402 28.37-108.56 69.188-19.161-40.817-60.514-69.188-108.56-69.188z\"></path>\n    </svg>\n  <div id=\"modal\">\n    <div>咱俩在一起吧</div>\n    <div style=\"margin-top:25px\">\n      <span style=\"color: #f31\" id=\"ok\" class=\"shake\">好</span>\n      <span id=\"notok\">不好</span>\n    </div>\n  </div>\n  <div class=\"man\" id=\"sad-man\">\n      <div class=\"head\"></div>\n      <div class=\"body\"></div>\n      <div class=\"feet\">\n        <div class=\"foot\"></div>\n        <div class=\"foot\"></div>\n      </div>\n    </div>\n<script>\n  var heartHeight = 150\n  var beatSpeed = 0.003\n  var two = new Two({\n    fullscreen: true,\n    type: Two.Types.canvas,\n    autostart: true\n  }).appendTo(document.body);\n  //m263.42 235.15c-66.24 0-120 53.76-120 120 0 134.76 135.93 170.09 228.56 303.31 87.574-132.4 228.56-172.86 228.56-303.31 0-66.24-53.76-120-120-120-48.048 0-89.402 28.37-108.56 69.188-19.161-40.817-60.514-69.188-108.56-69.188z\n    var c = Two.Utils.read.path(document.querySelector('path'))\n    console.log(c)\n    c.scale = 0.2\n    c.translation.set(window.innerWidth / 2, heartHeight)\n    c.fill = '#f31'\n    c.flag = 1\n    two.scene.add(c)\n\n    var characters = [];\n    var styles = {\n      family: 'proxima-nova, sans-serif',\n      size: 50,\n      leading: 50,\n      weight: 900\n    };\n    var gravity = new Two.Vector(0, 0.66);\n    var i = 0;\n    for(let s of ['今天','是','七夕节','，','咱俩','在一起','吧']){\n\n      setTimeout(function(){add(s)}, 800 * i++)\n    }\n    function getRandomColor() {\n          var color = {\n            r: Math.floor(Math.random() * 255),\n            g: Math.floor(Math.random() * 255),\n            b: Math.floor(Math.random() * 255),\n            toString: function(a) {\n              if (a) {\n                return 'rgba('\n                  + color.r + ','\n                  + color.g + ','\n                  + color.b + ','\n                  + a + ')';\n              }\n              return 'rgb('\n                + color.r + ','\n                + color.g + ','\n                + color.b + ')';\n            }\n          };\n          return color;\n        }\n    two.bind('update', function() {\n\n      c.flag = (c.scale > 0.2 || c.scale < 0.1) ? -c.flag : c.flag\n      c.scale += beatSpeed * c.flag\n      for (var i = 0; i < characters.length; i++) {\n\n        var text = characters[i];\n        text.translation.addSelf(text.velocity);\n        text.rotation += text.velocity.r;\n\n        text.velocity.addSelf(gravity);\n        if (text.velocity.y > 0 && text.translation.y > two.height)  {\n          two.scene.remove(text);\n          characters.splice(i, 1);\n        }\n        if(characters.length === 0){\n          ask()\n        }\n      }\n\n    });\n\n    function ask(){\n      var modal = document.getElementById('modal');\n      modal.style.display = 'block'\n      document.getElementById('ok').onclick = function(){\n        modal.style.display = ''\n        console.log('ok')\n        var hearts = []\n        for(var i = 0; i < 100; i++){\n          let heart = createHeart()\n          hearts.push(heart)\n          two.scene.add(heart)\n        }\n        var text = two.makeText('', 187.5, 250, {size: 30, weight: 300})\n        for(let i = 0; i <= 7; i++){\n          setTimeout(function(){\n            text.value = '余生请多指教!'.substr(0, i);\n          }, 500 * i);\n        }\n        console.log(text)\n        two.bind('update', function() {\n          for (var i = 0; i < hearts.length; i++) {\n\n            var c = hearts[i];\n            c.translation.addSelf(c.velocity);\n            c.rotation += c.velocity.r;\n\n            c.velocity.addSelf( gravity);\n            if (c.velocity.y > 0 && c.translation.y > two.height + 1000)  {\n                // c.fill = getRandomColor() + ''\n                c.scale = 0.05 + rnd(-0.01, 0.01)\n                c.translation.set(window.innerWidth / 2, heartHeight)\n                c.velocity.x = 5 * (Math.random() - 0.5);\n                c.velocity.y = - (5 * Math.random() + 22);\n                c.velocity.r = 0.1 * Math.PI / 8;\n            }\n          }\n        });\n      }\n      document.getElementById('notok').onclick = function(){\n        console.log('notok')\n        modal.style.display = ''\n        document.getElementById('sad-man').classList.add('show');\n        var timer = setInterval(function(){\n          console.log(c.opacity)\n          if(c.opacity <= 0.03){\n            two.scene.remove(c)\n            return clearInterval(timer)\n          }\n          c.opacity -= 0.02;\n          beatSpeed = beatSpeed * 0.8; \n        }, 100)\n\n      }\n    }\n    function rnd(min, max){\n      return min + Math.random() * (max - min)\n    }\n    function createHeart(){\n      var c = Two.Utils.read.path(document.querySelector('path'))\n      c.scale = 0.05\n      c.translation.set(window.innerWidth / 2, heartHeight)\n      c.fill = '#f31'\n      c.velocity = new Two.Vector();\n      c.velocity.x = 5 * (Math.random() - 0.5);\n      c.velocity.y = - (5 * Math.random() + 22);\n      c.velocity.r = 0.1 * Math.PI / 8;\n      c.rotation = 3 * Math.random()\n      return c\n    }\n    function add(msg) {\n\n      var x = Math.random() * two.width / 2 + two.width / 4;\n      var y = two.height * 1.25;\n\n      var text = two.makeText(msg, x, y, styles);\n      text.size *= 1.3;\n      text.fill = getRandomColor() + '';\n\n      text.velocity = new Two.Vector();\n      text.velocity.x = 5 * (Math.random() - 0.5);\n      text.velocity.y = - (5 * Math.random() + 22);\n      text.velocity.r = 0.1 * Math.PI / 8;\n      console.log(text.velocity.y )\n      characters.push(text);\n\n      }\n  </script>\n</body>\n</html>"},"hash":"e7e468c423bd1a4a9a72acd78b575804","cacheData":{}}